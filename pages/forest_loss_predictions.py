import streamlit as st
import pandas as pd

# Set page title
st.title("Prediksi Kehilangan Hutan (2025-2035)")

# SARIMA Prediction Data
st.header("Prediksi Kehilangan Hutan (SARIMA)")
sarima_data = {
    "Bulan": ["Agustus", "April", "Desember", "Februari", "Januari", "Juli", "Juni", "Maret", "Mei", "November", "Oktober", "September"],
    2025: [425.1, 439.9, 417.6, 476.6, 403.1, 401.7, 429.5, 484.3, 423.4, 403.4, 435.0, 455.4],
    2026: [441.1, 446.2, 438.6, 458.6, 433.6, 433.2, 442.6, 461.2, 440.5, 433.7, 444.5, 451.4],
    2027: [446.6, 448.3, 445.7, 452.5, 444.0, 443.9, 447.1, 453.4, 446.4, 444.1, 447.7, 450.1],
    2028: [448.4, 449.0, 448.1, 450.4, 447.6, 447.5, 448.6, 450.7, 448.4, 447.6, 448.8, 449.6],
    2029: [449.1, 449.3, 449.0, 449.7, 448.8, 448.7, 449.1, 449.8, 449.0, 448.8, 449.2, 449.5],
    2030: [449.3, 449.3, 449.2, 449.5, 449.2, 449.2, 449.3, 449.5, 449.3, 449.2, 449.3, 449.4],
    2031: [449.3, 449.4, 449.3, 449.4, 449.3, 449.3, 449.3, 449.4, 449.3, 449.3, 449.4, 449.4],
    2032: [449.4, 449.4, 449.4, 449.4, 449.4, 449.4, 449.4, 449.4, 449.4, 449.4, 449.4, 449.4],
    2033: [449.4, 449.4, 449.4, 449.4, 449.4, 449.4, 449.4, 449.4, 449.4, 449.4, 449.4, 449.4],
    2034: [449.4, 449.4, 449.4, 449.4, 449.4, 449.4, 449.4, 449.4, 449.4, 449.4, 449.4, 449.4],
    2035: [449.4, 449.4, 449.4, 449.4, 449.4, 449.4, 449.4, 449.4, 449.4, 449.4, 449.4, 449.4]
}
sarima_df = pd.DataFrame(sarima_data)
st.dataframe(sarima_df.set_index("Bulan"))

# Holt-Winters Prediction Data
st.header("Prediksi Kehilangan Hutan (Holt-Winters)")
holt_winters_data = {
    "Bulan": ["Agustus", "April", "Desember", "Februari", "Januari", "Juli", "Juni", "Maret", "Mei", "November", "Oktober", "September"],
    2025: [443.1, 607.4, 405.5, 901.9, 415.8, 453.7, 431.3, 868.6, 354.0, 358.8, 273.2, 514.9],
    2026: [475.2, 653.5, 434.6, 974.4, 445.7, 486.8, 462.5, 938.1, 378.8, 384.0, 291.6, 553.1],
    2027: [510.0, 703.7, 466.0, 1053.7, 478.1, 522.5, 496.2, 1014.0, 405.7, 411.3, 311.5, 594.5],
    2028: [547.7, 758.3, 500.0, 1140.4, 513.1, 561.4, 532.8, 1097.0, 434.7, 440.8, 333.0, 639.5],
    2029: [588.7, 817.7, 536.9, 1235.3, 551.1, 603.5, 572.5, 1187.8, 466.1, 472.7, 356.2, 688.5],
    2030: [633.2, 882.6, 577.0, 1339.4, 592.4, 649.3, 615.6, 1287.2, 500.2, 507.3, 381.2, 741.7],
    2031: [681.6, 953.3, 620.5, 1453.5, 637.2, 699.1, 662.5, 1396.3, 537.1, 544.9, 408.2, 799.7],
    2032: [734.2, 1030.7, 667.7, 1578.9, 685.9, 753.2, 713.4, 1516.0, 577.2, 585.6, 437.5, 862.9],
    2033: [791.5, 1115.2, 719.1, 1716.7, 738.9, 812.2, 768.9, 1647.6, 620.7, 629.8, 469.2, 931.8],
    2034: [854.0, 1207.7, 775.1, 1868.5, 796.7, 876.6, 829.3, 1792.3, 667.9, 677.9, 503.5, 1007.2],
    2035: [922.1, 1309.1, 836.1, 2035.7, 859.6, 946.8, 895.2, 1951.7, 719.4, 730.2, 540.7, 1089.5]
}
holt_winters_df = pd.DataFrame(holt_winters_data)
st.dataframe(holt_winters_df.set_index("Bulan"))

# ETS Prediction Data
st.header("Prediksi Kehilangan Hutan (ETS)")
ets_data = {
    "Bulan": ["Agustus", "April", "Desember", "Februari", "Januari", "Juli", "Juni", "Maret", "Mei", "November", "Oktober", "September"],
    2025: [334.6, 470.2, 266.3, 724.2, 297.1, 323.7, 316.9, 749.6, 239.2, 232.9, 177.5, 415.2],
    2026: [313.2, 448.8, 244.9, 702.8, 275.7, 302.3, 295.5, 728.2, 217.8, 211.5, 156.1, 393.8],
    2027: [291.8, 427.4, 223.5, 681.3, 254.3, 280.9, 274.1, 706.8, 196.3, 190.1, 134.7, 372.4],
    2028: [270.4, 406.0, 202.1, 659.9, 232.9, 259.5, 252.7, 685.4, 174.9, 168.7, 113.3, 351.0],
    2029: [249.0, 384.6, 180.7, 638.5, 211.5, 238.1, 231.3, 664.0, 153.5, 147.2, 91.9, 329.6],
    2030: [227.5, 363.2, 159.3, 617.1, 190.1, 216.7, 209.9, 642.5, 132.1, 125.8, 70.5, 308.2],
    2031: [206.1, 341.8, 137.8, 595.7, 168.7, 195.3, 188.5, 621.1, 110.7, 104.4, 49.1, 286.8],
    2032: [184.7, 320.4, 116.4, 574.3, 147.3, 173.9, 167.1, 599.7, 89.3, 83.0, 27.7, 265.3],
    2033: [163.3, 299.0, 95.0, 652.9, 125.9, 152.5, 145.6, 578.3, 67.9, 61.6, 6.3, 243.9],
    2034: [141.9, 277.5, 73.6, 531.5, 104.5, 131.1, 124.2, 556.9, 46.5, 40.2, -15.1, 222.5],
    2035: [120.5, 256.1, 52.2, 510.1, 83.1, 109.7, 102.8, 535.5, 25.1, 18.8, -36.5, 201.1]
}
ets_df = pd.DataFrame(ets_data)
st.dataframe(ets_df.set_index("Bulan"))

# Model Evaluation
st.header("Evaluasi Model (Testing 2024)")
st.subheader("SARIMA")
st.write("- MAE: 92.90")
st.write("- MSE: 13462.85")
st.write("- RMSE: 116.03")
st.write("- MAPE: 17.94%")
st.write("Tutupan hutan terendah yang diprediksi (SARIMA): 1,659,461.66 (tidak mencapai nol dalam 20 tahun).")

st.subheader("Holt-Winters")
st.write("- MAE: 187.86")
st.write("- MSE: 64132.08")
st.write("- RMSE: 253.24")
st.write("- MAPE: 39.90%")

st.subheader("ETS")
st.write("- MAE: 219.46")
st.write("- MSE: 65662.10")
st.write("- RMSE: 256.25")
st.write("- MAPE: 44.29%")

# SARIMA Model Details
st.header("Detail Model SARIMA Terbaik")
st.write("**Model**: ARIMA(1,0,0)(1,0,0)[12] intercept")
st.write("**AIC**: 1003.678")
st.write("**BIC**: 1012.785")
st.write("**HQIC**: 1007.303")
st.write("**Log Likelihood**: -497.839")
st.write("**Total Fit Time**: 4.462 seconds")
st.write("**Coefficients**:")
st.write("- Intercept: 225.0570 (std err: 72.739, z: 3.094, P>|z|: 0.002)")
st.write("- ar.L1: 0.2413 (std err: 0.115, z: 2.100, P>|z|: 0.036)")
st.write("- ar.S.L12: 0.3399 (std err: 0.113, z: 3.004, P>|z|: 0.003)")
st.write("- sigma2: 58,090 (std err: 9232.635, z: 6.291, P>|z|: 0.000)")
st.write("**Diagnostics**:")
st.write("- Ljung-Box (L1) (Q): 0.02, Prob(Q): 0.89")
st.write("- Jarque-Bera (JB): 59.95, Prob(JB): 0.00")
st.write("- Heteroskedasticity (H): 0.09, Prob(H): 0.00")
st.write("- Skew: 1.59")
st.write("- Kurtosis: 6.14")